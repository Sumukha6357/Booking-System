INSERT INTO tenants (id, slug, name, created_at)
SELECT '00000000-0000-0000-0000-000000000001', 'default', 'Default Tenant', CURRENT_TIMESTAMP
WHERE NOT EXISTS (
  SELECT 1 FROM tenants WHERE id = '00000000-0000-0000-0000-000000000001'
);

INSERT INTO roles (id, name)
SELECT '10000000-0000-0000-0000-000000000001', 'PLATFORM_ADMIN'
WHERE NOT EXISTS (
  SELECT 1 FROM roles WHERE id = '10000000-0000-0000-0000-000000000001'
);

INSERT INTO roles (id, name)
SELECT '10000000-0000-0000-0000-000000000002', 'VENDOR'
WHERE NOT EXISTS (
  SELECT 1 FROM roles WHERE id = '10000000-0000-0000-0000-000000000002'
);

INSERT INTO roles (id, name)
SELECT '10000000-0000-0000-0000-000000000003', 'USER'
WHERE NOT EXISTS (
  SELECT 1 FROM roles WHERE id = '10000000-0000-0000-0000-000000000003'
);

INSERT INTO permissions (id, code)
SELECT '20000000-0000-0000-0000-000000000001', 'integration:read'
WHERE NOT EXISTS (
  SELECT 1 FROM permissions WHERE id = '20000000-0000-0000-0000-000000000001'
);

INSERT INTO permissions (id, code)
SELECT '20000000-0000-0000-0000-000000000002', 'booking:write'
WHERE NOT EXISTS (
  SELECT 1 FROM permissions WHERE id = '20000000-0000-0000-0000-000000000002'
);

INSERT INTO permissions (id, code)
SELECT '20000000-0000-0000-0000-000000000003', 'payment:capture'
WHERE NOT EXISTS (
  SELECT 1 FROM permissions WHERE id = '20000000-0000-0000-0000-000000000003'
);

INSERT INTO permissions (id, code)
SELECT '20000000-0000-0000-0000-000000000004', 'analytics:read'
WHERE NOT EXISTS (
  SELECT 1 FROM permissions WHERE id = '20000000-0000-0000-0000-000000000004'
);

INSERT INTO role_permissions (role_id, permission_id)
SELECT '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000001'
WHERE NOT EXISTS (
  SELECT 1 FROM role_permissions WHERE role_id = '10000000-0000-0000-0000-000000000001' AND permission_id = '20000000-0000-0000-0000-000000000001'
);

INSERT INTO role_permissions (role_id, permission_id)
SELECT '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000002'
WHERE NOT EXISTS (
  SELECT 1 FROM role_permissions WHERE role_id = '10000000-0000-0000-0000-000000000001' AND permission_id = '20000000-0000-0000-0000-000000000002'
);

INSERT INTO role_permissions (role_id, permission_id)
SELECT '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000003'
WHERE NOT EXISTS (
  SELECT 1 FROM role_permissions WHERE role_id = '10000000-0000-0000-0000-000000000001' AND permission_id = '20000000-0000-0000-0000-000000000003'
);

INSERT INTO role_permissions (role_id, permission_id)
SELECT '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000004'
WHERE NOT EXISTS (
  SELECT 1 FROM role_permissions WHERE role_id = '10000000-0000-0000-0000-000000000001' AND permission_id = '20000000-0000-0000-0000-000000000004'
);

INSERT INTO role_permissions (role_id, permission_id)
SELECT '10000000-0000-0000-0000-000000000002', '20000000-0000-0000-0000-000000000002'
WHERE NOT EXISTS (
  SELECT 1 FROM role_permissions WHERE role_id = '10000000-0000-0000-0000-000000000002' AND permission_id = '20000000-0000-0000-0000-000000000002'
);

INSERT INTO role_permissions (role_id, permission_id)
SELECT '10000000-0000-0000-0000-000000000002', '20000000-0000-0000-0000-000000000004'
WHERE NOT EXISTS (
  SELECT 1 FROM role_permissions WHERE role_id = '10000000-0000-0000-0000-000000000002' AND permission_id = '20000000-0000-0000-0000-000000000004'
);

INSERT INTO role_permissions (role_id, permission_id)
SELECT '10000000-0000-0000-0000-000000000003', '20000000-0000-0000-0000-000000000004'
WHERE NOT EXISTS (
  SELECT 1 FROM role_permissions WHERE role_id = '10000000-0000-0000-0000-000000000003' AND permission_id = '20000000-0000-0000-0000-000000000004'
);

INSERT INTO app_users (id, tenant_id, email, password_hash, role, created_at)
SELECT
  '00000000-0000-0000-0000-000000000010',
  '00000000-0000-0000-0000-000000000001',
  'admin@local.dev',
  '$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy',
  'PLATFORM_ADMIN',
  CURRENT_TIMESTAMP
WHERE NOT EXISTS (
  SELECT 1 FROM app_users WHERE id = '00000000-0000-0000-0000-000000000010'
);